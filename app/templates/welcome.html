  <script src="static/jquery-3.2.1.js"></script>
  <script src="static/loader.js"></script>


  <script type="text/javascript">


google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(draw_chart);

// Using the core $.ajax() method
$.ajax({
 
    // The URL for the request
    url: "/api/measurements/",
 
    // The data to send (will be converted to a query string)
    data: {
        dev_id: 1
    },
 
    // Whether this is a POST or GET request
    type: "GET",
	
	
	beforeSend: function (xhr){ 
        		xhr.setRequestHeader('Authorization', 'Basic ' + btoa('jefli:123456')); 
    			},
 
    // The type of data we expect back
    dataType : "json",
})
  // Code to run if the request succeeds (is done);
  // The response is passed to the function
  .done(function( json ) {
     //$( "<h1>" ).text( json.title ).appendTo( "body" );
     //$( "<div class=\"content\">").html( json.html ).appendTo( "body" );
     $("msg").html(json.html);
     alert(json.html);
  })
  // Code to run if the request fails; the raw request and
  // status codes are passed to the function
  .fail(function( xhr, status, errorThrown ) {
    alert( "Sorry, there was a problem!" );
    console.log( "Error: " + errorThrown );
    console.log( "Status: " + status );
    console.dir( xhr );
  })
  // Code to run regardless of success or failure;
  .always(function( xhr, status ) {
    alert( "The request is complete!" );
  });

  function draw_chart() {

      jsonData = '[{"c1":0.5,"c2":1.5,"c3":22.0,"start_time":"2017-07-12T03:17:44.332000+00:00"},{"c1":0.5,"c2":1.5,"c3" :22.0,"start_time":"2017-07-12T03:17:44.332000+00:00"},{"c1":0.5,"c2":1.5,"c3":22.0,"start_time":"2017-07-12T03:17:44.332000+00:00"},{"c1":0.5,"c2":5.5,"c3":22.0,"start_time":"2017-07-12T03:17:44.332000+00:00"}]';

      var row, date, data = new google.visualization.DataTable();
      data.addColumn('date', 'Date');
      data.addColumn('number', 'c1');

      for (var i=1;i<jsonData.length;i++) {
        row = jsonData[i];
        date = row[3];
        data.addRow([
            new Date(date),
            parseFloat(row[0])]);
      }


       var options = {
        hAxis: {
          title: 'Time',
          textStyle: {
            color: '#01579b',
            fontSize: 20,
            fontName: 'Arial',
            bold: true,
            italic: true
          },
          titleTextStyle: {
            color: '#01579b',
            fontSize: 16,
            fontName: 'Arial',
            bold: false,
            italic: true
          }
        },
        vAxis: {
          title: 'Popularity',
          textStyle: {
            color: '#1a237e',
            fontSize: 24,
            bold: true
          },
          titleTextStyle: {
            color: '#1a237e',
            fontSize: 24,
            bold: true
          }
        },
        colors: ['#a52714', '#097138']
      };
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
  }


</script>


  <div id="chart_div"></div>
  <div id="msg">message</div>    